$(document).ready(function(){if($(".nav-side-tog").click(function(){$(".sidenav-open").css("width","250px"),$("body").css("background-color","rgba(0,0,0,0.4)")}),$(".sidenav-open .closebtn").click(function(){$(".sidenav-open").css("width","0px"),$("body").css("background-color","white")}),$.urlParam=function(e){return new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href)[1]||0},document.URL.indexOf("login")>=0){function e(){""!=$("#InputUsername").val()&&""!=$("#InputPassword").val()?($("#loginMessage").html(""),$("#loginBtn").css("display","none"),$("#login-loader").css("display","flex"),function(e,o){return console.log("AjaxProcess()"),$.ajax({type:"POST",async:!0,dataType:"json",url:e,headers:{"X-Requested-With":"XMLHttpRequest"},data:{data:o}})}("login/ajaxLogin",{username:$("#InputUsername").val(),password:$("#InputPassword").val()}).done(function(e){0==e.error.ErrorStatus?window.location.href="/":401==e.error.ErrorStatus?window.location.href="/logout":3==e.error.ErrorStatus&&($("#loginMessage").html("Some of your details were incorrect..."),$("#loginBtn").css("display","block"),$("#login-loader").css("display","none"))})):$("#loginMessage").html("Please provide your username and password...")}$(".login-box").on("click","#loginBtn",function(){e()}),$(".login-box").keypress(function(o){13==o.which&&e()})}}),$(document).ready(function(){$("#new-user-submit").on("click",function(){console.log("new user"),function(){$("#user-new-loader").css("display","flex"),$("#user-new-btn-wrap").css("display","none");var e={userName:$("#new-user-username").val(),userForename:$("#new-user-fname").val(),userSurname:$("#new-user-sname").val(),userEmail:$("#new-user-email").val(),userPassword:$("#new-user-password").val(),userEnabled:$("#new-user-enabled").val(),userAdmin:$("#new-user-admin").val()};AjaxProcess("admin/ajaxAddUser",e).done(function(e){0==e.error.ErrorStatus?($("#user-new-loader").css("display","none"),$("#addUser").modal("hide")):401==e.error.ErrorStatus?window.location.href="/logout":($("#user-new-loader").css("display","none"),$(".page-body").html(e.error.ErrorMessage))})}()}),document.URL.indexOf("admin")>=0&&(console.log("admin"),$("#user-list-loader").css("display","flex"),AjaxProcess("admin/ajaxGetUsers",null).done(function(e){0==e.error.ErrorStatus?($("#user-list-loader").css("display","none"),$(".page-body").html(e.html)):401==e.error.ErrorStatus?window.location.href="/logout":($("#user-list-loader").css("display","none"),$(".page-body").html(e.error.ErrorMessage))}))}),$(document).ready(function(){function e(){$("#calendar-loader").css("display","flex");var e={employee:$("#employee").val(),month:$("#calMonth").val(),year:$("#calYear").val()};AjaxProcess("holiday/getCalendar",e).done(function(e){0==e.error.ErrorStatus?($("#calendar-loader").css("display","none"),$("#calendar-wrap").html(e.html)):401==e.error.ErrorStatus?window.location.href="/logout":1==e.error.ErrorStatus&&($("#calendar-loader").css("display","none"),$("#calendar-wrap").html("Error"))})}$("#employee").change(function(){e()}),$("#calMonth").change(function(){$("#calMonth option").removeAttr("selected","selected"),$("#calMonth option:selected").attr("selected","selected"),e()}),$("#calYear").change(function(){$("#calYear option").removeAttr("selected","selected"),e()}),$("#calendar-wrap").delegate("#prevMonth","click",function(){$("#calMonth option:selected").val();1==$("#calMonth").val()?$("#calYear option:first").val()!=$("#calYear option:selected").val()&&($("#calMonth option").removeAttr("selected","selected"),$("#calMonth option:last").attr("selected","selected"),$("#calYear option:selected").prev().attr("selected","selected"),$("#calYear option:selected").nextAll().removeAttr("selected","selected"),e()):($("#calMonth option:selected").prev().attr("selected","selected"),$("#calMonth option:selected").prevAll().removeAttr("selected","selected"),$("#calMonth option:selected").nextAll().removeAttr("selected","selected"),e())}),$("#calendar-wrap").delegate("#nextMonth","click",function(){$("#calMonth option:selected").val();12==$("#calMonth").val()?$("#calYear option:last").val()!=$("#calYear option:selected").val()&&($("#calMonth option").removeAttr("selected","selected"),$("#calMonth option:first").attr("selected","selected"),$("#calYear option:selected").next().attr("selected","selected"),$("#calYear option:selected").prevAll().removeAttr("selected","selected"),e()):($("#calMonth option:selected").next().attr("selected","selected"),e())});var o=!1;$("#formModal").on("click","#submitRequest",function(){!function(){$("#req-response").css("display","none"),$("#submitRequest").css("display","none"),$("#req-loader").css("display","flex");var e={holFrom:$("#holFrom").val(),holFromTime:$("#holFromTime").val(),holTo:$("#holTo").val(),holToTime:$("#holToTime").val(),holRef:$("#holRef").val(),holHalfDays:$("#holHalfDays").val(),forceSubmit:o};AjaxProcess("holiday/submitHolRequest",e).done(function(e){0==e.error.ErrorStatus?($("#req-response").html("Request Submitted."),$("#req-response").css("display","block"),$("#req-loader").css("display","none"),$("#submitRequest").css("display","block")):403==e.error.ErrorStatus?window.location.href="/logout":5==e.error.ErrorStatus||50==e.error.ErrorStatus?(50==e.error.ErrorStatus&&(o=!0),$("#req-response").html(e.message),$("#req-response").css("display","block"),$("#req-loader").css("display","none"),$("#submitRequest").css("display","block")):($("#req-loader").css("display","none"),$("#submitRequest").css("display","block"))})}()}),$("#formModal").change(function(){1==$("#from_halfday").prop("checked")?$("#from-time-select").css("display","block"):($("#from-time-select").css("display","none"),$("#holFromTime option:first").attr("selected","selected")),1==$("#to_halfday").prop("checked")?$("#to-time-select").css("display","block"):($("#to-time-select").css("display","none"),$("#holToTime option:first").attr("selected","selected"))}),document.URL.indexOf("holiday")>=0&&(console.log("holiday"),$("#allowance-loader").css("display","flex"),$("#selectyear").prop("disabled",!0),AjaxProcess("holiday/getAllowance",null).done(function(e){0==e.error.ErrorStatus?($("#allowance-loader").css("display","none"),$("#allowance-wrap").html(e.html),$("#selectyear").prop("disabled",!1)):401==e.error.ErrorStatus?window.location.href="/logout":1==e.error.ErrorStatus&&($("#allowance-loader").css("display","none"),$("#allowance-wrap").html("Error"),$("#selectyear").prop("disabled",!1))}),e(),$("#holidays-loader").css("display","flex"),AjaxProcess("holiday/getHolidays",null).done(function(e){0==e.error.ErrorStatus?($("#hol-table-loader").css("display","none"),$("#hol-table-wrap").html(e.html)):401==e.error.ErrorStatus?window.location.href="/logout":1==e.error.ErrorStatus&&($("#hol-table-loader").css("display","none"),$("#hol-table-wrap").html("Error"))}))});